<project default="restart-ladybug" xmlns:if="ant:if" xmlns:unless="ant:unless">
	<target name="restart-ladybug">
		<property file="../../build.properties"/>
		<property file="build.properties"/>
		<!--
		Change the following properties to speed up the build process (either
		here to have git report your changes or in build.properties which is
		ignored by git). E.g. when you are not (re)moving any classes you could
		do the following (it would still be a good idea to do a full build with
		tests before you commit):
		<property name="maven.clean" value="false"/>
		<property name="maven.skip.tests" value="true"/>
		<property name="maven.skip.javadoc" value="true"/>
		-->
		<!-- Default values, foolproof but time consuming -->
		<property name="maven.clean" value="true"/>
		<property name="maven.skip.tests" value="false"/>
		<property name="maven.skip.javadoc" value="false"/>
		<property name="maven.verbose" value="false"/>
		<!-- Optionally Build ibis-echo2 -->
		<!-- TODO -->
		<!-- Build Ladybug -->
		<!-- Set test.with.iaf to true to test with IAF -->
		<property name="test.with.iaf" value="false"/>
		<!-- Change iaf.module to example or test to test with one of those modules instead of module webapp -->
		<property name="iaf.module" value="webapp"/>
		<exec executable="../frank-runner/mvn.bat" dir="../../../ibis-ladybug" vmlauncher="false" failonerror="true">
			<arg value="clean" if:true="${maven.clean}"/>
			<arg value="install"/>
			<arg value="-DskipTests" if:true="${maven.skip.tests}"/>
			<arg value="-Dmaven.javadoc.skip=true" if:true="${maven.skip.javadoc}"/>
			<arg value="-X" if:true="${maven.verbose}"/>
			<arg value="--settings" if:set="maven.settings.xml"/>
			<arg value="${maven.settings.xml}" if:set="maven.settings.xml"/>
		</exec>
		<!-- Test with iaf-webapp -->
		<ant dir="../iaf-webapp" antfile="build.xml"/>
		<xmlproperty file="../../../ibis-ladybug/pom.xml"/>
		<property name="pom.xml" location="${basedir}/../../../iaf/webapp/pom.xml"/>
		<property name="build.properties" location="${basedir}/../iaf-webapp/build.properties"/>
		<echo message="PLEASE NOTE: Set version of artifact ibis-ladybug to ${project.version} in ${pom.xml} to make iaf-webapp use changes in ibis-ladybug"/>
		<echo message="PLEASE NOTE: Make sure maven.projects in ${build.properties} is empty or contains ladybug in case you also change iaf-ladybug"/>
	</target>
</project>